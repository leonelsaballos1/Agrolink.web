<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mapa Global de Cultivos - Nicaragua</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
  body {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    background: #faf7f2;
  }
  header {
    background-color: #e6a840;
    color: white;
    text-align: center;
    padding: 15px;
    font-size: 22px;
    font-weight: bold;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  }
  #map {
    height: 88vh;
    width: 100%;
  }
  #controls {
    position: absolute;
    top: 90px;
    left: 10px;
    z-index: 1000;
    background: rgba(255,255,255,0.9);
    padding: 12px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
    font-size: 14px;
  }
  #controls label {
    display: block;
    margin: 5px 0;
  }
  #search-container {
    position: absolute;
    top: 20px;
    right: 15px;
    z-index: 1000;
    background: rgba(255,255,255,0.9);
    padding: 10px;
    border-radius: 10px;
    box-shadow: 0 0 8px rgba(0,0,0,0.2);
  }
  #search {
    padding: 5px;
    border-radius: 5px;
    border: 1px solid #ccc;
  }
  button {
    padding: 5px 10px;
    border: none;
    border-radius: 5px;
    background: #e6a840;
    color: white;
    cursor: pointer;
  }
  button:hover { background: #d6951f; }
  .leaflet-popup-content b { color: #005f1f; }
</style>
</head>
<body>

<header>üåç Mapa Global de Cultivos - Nicaragua</header>

<div id="controls">
  <h4>üß≠ Capas de informaci√≥n</h4>
  <label><input type="checkbox" id="maiz" checked> Zonas de Ma√≠z üåΩ</label>
  <label><input type="checkbox" id="frijol" checked> Zonas de Frijol ü´ò</label>
  <label><input type="checkbox" id="sorgo" checked> Zonas de Sorgo üåæ</label>
  <hr>
  <label><input type="checkbox" id="clima" checked> Capa Clim√°tica ‚òÄÔ∏è</label>
</div>

<div id="search-container">
  <input id="search" type="text" placeholder="Buscar departamento...">
  <button onclick="buscar()">üîç</button>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  const map = L.map('map').setView([12.8654, -85.2072], 7);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  // =============================
  // üü¢ ZONAS DE CULTIVOS (POL√çGONOS)
  // =============================

  const zonasMaiz = L.polygon([
    [12.9, -86.9], [12.5, -86.7], [12.2, -86.3], [12.0, -86.9]
  ], { color: "#ffcc00", fillColor: "#ffe680", fillOpacity: 0.6 })
  .bindPopup("<b>Zona Maicera</b><br>Departamentos: Le√≥n, Managua, Chinandega<br><b>Condiciones:</b> Suelo franco, 22‚Äì28¬∞C, 800‚Äì1800 mm lluvia.");

  const zonasFrijol = L.polygon([
    [13.2, -86.6], [13.3, -86.0], [12.8, -85.9], [12.6, -86.4]
  ], { color: "#8b4513", fillColor: "#deb887", fillOpacity: 0.6 })
  .bindPopup("<b>Zona Frijolera</b><br>Departamentos: Estel√≠, Matagalpa, Jinotega<br><b>Condiciones:</b> Suelo franco, 20‚Äì28¬∞C, 800‚Äì1500 mm lluvia.");

  const zonasSorgo = L.polygon([
    [12.3, -85.9], [12.0, -85.5], [11.8, -85.7], [12.1, -86.0]
  ], { color: "#a0522d", fillColor: "#f0c090", fillOpacity: 0.6 })
  .bindPopup("<b>Zona Sorguera</b><br>Departamentos: Boaco, Chontales, Carazo<br><b>Condiciones:</b> Suelo arenoso, 24‚Äì32¬∞C, 800‚Äì1200 mm lluvia.");

  // =============================
  // ‚òÄÔ∏è CAPA CLIM√ÅTICA (C√çRCULOS SIMULADOS)
  // =============================

  const clima = L.layerGroup([
    L.circle([12.5, -86.2], { radius: 60000, color: "blue", fillColor: "blue", fillOpacity: 0.2 })
      .bindPopup("<b>Zona h√∫meda</b><br>Alta precipitaci√≥n anual (2000 mm)"),
    L.circle([13.0, -85.5], { radius: 60000, color: "orange", fillColor: "orange", fillOpacity: 0.2 })
      .bindPopup("<b>Zona c√°lida</b><br>Temperaturas promedio 30¬∞C"),
    L.circle([11.8, -85.9], { radius: 60000, color: "green", fillColor: "green", fillOpacity: 0.2 })
      .bindPopup("<b>Zona templada</b><br>Clima ideal para ma√≠z y sorgo (25¬∞C, 1200 mm)")
  ]);

  // =============================
  // üîç B√öSQUEDA DE DEPARTAMENTOS
  // =============================

  const departamentos = {
    "Rivas": [11.4333, -85.8333],
    "Carazo": [11.75, -86.2],
    "Chontales": [12.5, -85.5],
    "Managua": [12.1333, -86.25],
    "Le√≥n": [12.43, -86.88],
    "Chinandega": [12.61, -87.13],
    "Estel√≠": [13.08, -86.35],
    "Matagalpa": [12.92, -85.92],
    "Boaco": [12.47, -85.66],
    "Jinotega": [13.1, -85.98],
  };

  function buscar() {
    const input = document.getElementById("search").value.trim();
    if (departamentos[input]) {
      map.setView(departamentos[input], 9);
    } else {
      alert("Departamento no encontrado");
    }
  }

  // =============================
  // ‚úÖ GESTI√ìN DE CAPAS
  // =============================

  const capaMaiz = L.layerGroup([zonasMaiz]).addTo(map);
  const capaFrijol = L.layerGroup([zonasFrijol]).addTo(map);
  const capaSorgo = L.layerGroup([zonasSorgo]).addTo(map);
  clima.addTo(map);

  document.getElementById('maiz').addEventListener('change', e => e.target.checked ? map.addLayer(capaMaiz) : map.removeLayer(capaMaiz));
  document.getElementById('frijol').addEventListener('change', e => e.target.checked ? map.addLayer(capaFrijol) : map.removeLayer(capaFrijol));
  document.getElementById('sorgo').addEventListener('change', e => e.target.checked ? map.addLayer(capaSorgo) : map.removeLayer(capaSorgo));
  document.getElementById('clima').addEventListener('change', e => e.target.checked ? map.addLayer(clima) : map.removeLayer(clima));

</script>

</body>
</html>
